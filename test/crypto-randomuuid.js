import {apply, isPolyfilled, isSupported, randomUUID} from '../lib/crypto-randomuuid.js'

describe('randomUUID', () => {
  it('has standard isSupported, isPolyfilled, apply API', () => {
    expect(isSupported).to.be.a('function')
    expect(isPolyfilled).to.be.a('function')
    expect(apply).to.be.a('function')
    expect(isSupported()).to.be.a('boolean')
    expect(isPolyfilled()).to.equal(false)
  })

  it('returns a UUID string', async () => {
    expect(randomUUID()).to.match(
      /^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,
    )
    expect(randomUUID()).to.not.equal(randomUUID())
  })
})
